diff --git a/config/packages/dev/web_profiler.yaml b/config/packages/dev/web_profiler.yaml
deleted file mode 100644
index e92166a..0000000
--- a/config/packages/dev/web_profiler.yaml
+++ /dev/null
@@ -1,6 +0,0 @@
-web_profiler:
-    toolbar: true
-    intercept_redirects: false
-
-framework:
-    profiler: { only_exceptions: false }
diff --git a/config/packages/test/web_profiler.yaml b/config/packages/test/web_profiler.yaml
deleted file mode 100644
index 03752de..0000000
--- a/config/packages/test/web_profiler.yaml
+++ /dev/null
@@ -1,6 +0,0 @@
-web_profiler:
-    toolbar: false
-    intercept_redirects: false
-
-framework:
-    profiler: { collect: false }
diff --git a/config/packages/web_profiler.yaml b/config/packages/web_profiler.yaml
new file mode 100644
index 0000000..17893da
--- /dev/null
+++ b/config/packages/web_profiler.yaml
@@ -0,0 +1,15 @@
+when@dev:
+    web_profiler:
+        toolbar: true
+        intercept_redirects: false
+
+    framework:
+        profiler: { only_exceptions: false }
+
+when@test:
+    web_profiler:
+        toolbar: false
+        intercept_redirects: false
+
+    framework:
+        profiler: { collect: false }
diff --git a/config/routes/dev/web_profiler.yaml b/config/routes/dev/web_profiler.yaml
deleted file mode 100644
index c82beff..0000000
--- a/config/routes/dev/web_profiler.yaml
+++ /dev/null
@@ -1,7 +0,0 @@
-web_profiler_wdt:
-    resource: '@WebProfilerBundle/Resources/config/routing/wdt.xml'
-    prefix: /_wdt
-
-web_profiler_profiler:
-    resource: '@WebProfilerBundle/Resources/config/routing/profiler.xml'
-    prefix: /_profiler
diff --git a/config/routes/web_profiler.yaml b/config/routes/web_profiler.yaml
new file mode 100644
index 0000000..8d85319
--- /dev/null
+++ b/config/routes/web_profiler.yaml
@@ -0,0 +1,8 @@
+when@dev:
+    web_profiler_wdt:
+        resource: '@WebProfilerBundle/Resources/config/routing/wdt.xml'
+        prefix: /_wdt
+
+    web_profiler_profiler:
+        resource: '@WebProfilerBundle/Resources/config/routing/profiler.xml'
+        prefix: /_profiler
diff --git a/symfony.lock b/symfony.lock
index e9e9bb1..c25705d 100644
--- a/symfony.lock
+++ b/symfony.lock
@@ -626,17 +626,16 @@
         "version": "v5.0.4"
     },
     "symfony/web-profiler-bundle": {
-        "version": "3.3",
+        "version": "5.4",
         "recipe": {
             "repo": "github.com/symfony/recipes",
             "branch": "master",
-            "version": "3.3",
-            "ref": "6bdfa1a95f6b2e677ab985cd1af2eae35d62e0f6"
+            "version": "5.3",
+            "ref": "24bbc3d84ef2f427f82104f766014e799eefcc3e"
         },
         "files": [
-            "config/packages/dev/web_profiler.yaml",
-            "config/packages/test/web_profiler.yaml",
-            "config/routes/dev/web_profiler.yaml"
+            "config/packages/web_profiler.yaml",
+            "config/routes/web_profiler.yaml"
         ]
     },
     "symfony/webpack-encore-bundle": {
